
Spooling started in log file: /u02/software/RMANCTLP/restore.log

Recovery Manager19.3.0.0.0

RMAN> 2> 3> 4> 5> 
allocated channel: a1
channel a1: SID=578 device type=DISK

allocated channel: a2
channel a2: SID=626 device type=DISK

Starting Duplicate Db at 16-JUN-20
searching for database ID
found backup of database ID 2076661792

contents of Memory Script:
{
   sql clone "create spfile from memory";
}
executing Memory Script

sql statement: create spfile from memory

contents of Memory Script:
{
   shutdown clone immediate;
   startup clone nomount;
}
executing Memory Script

Oracle instance shut down

connected to auxiliary database (not started)
Oracle instance started

Total System Global Area    5368708176 bytes

Fixed Size                     8907856 bytes
Variable Size               2919235584 bytes
Database Buffers            2415919104 bytes
Redo Buffers                  24645632 bytes
allocated channel: a1
channel a1: SID=578 device type=DISK
allocated channel: a2
channel a2: SID=626 device type=DISK

contents of Memory Script:
{
   sql clone "alter system set  control_files = 
  ''+PRAS_DATA/RMANCTLP/CONTROLFILE/current.258.1043260593'', ''+PRAS_FRA/RMANCTLP/CONTROLFILE/current.257.1043260593'' comment=
 ''Set by RMAN'' scope=spfile";
   sql clone "alter system set  db_name = 
 ''RMANCTLP'' comment=
 ''Modified by RMAN duplicate'' scope=spfile";
   sql clone "alter system set  db_unique_name = 
 ''RMANCTLP'' comment=
 ''Modified by RMAN duplicate'' scope=spfile";
   shutdown clone immediate;
   startup clone force nomount
   restore clone primary controlfile from  '/u02/software/RMANCTLP/RMANCTLP_1043258654_1_9231_1_0fv2tn8u.ctl';
   alter clone database mount;
}
executing Memory Script

sql statement: alter system set  control_files =   ''+PRAS_DATA/RMANCTLP/CONTROLFILE/current.258.1043260593'', ''+PRAS_FRA/RMANCTLP/CONTROLFILE/current.257.1043260593'' comment= ''Set by RMAN'' scope=spfile

sql statement: alter system set  db_name =  ''RMANCTLP'' comment= ''Modified by RMAN duplicate'' scope=spfile

sql statement: alter system set  db_unique_name =  ''RMANCTLP'' comment= ''Modified by RMAN duplicate'' scope=spfile

Oracle instance shut down

Oracle instance started

Total System Global Area    5368708176 bytes

Fixed Size                     8907856 bytes
Variable Size               2919235584 bytes
Database Buffers            2415919104 bytes
Redo Buffers                  24645632 bytes
allocated channel: a1
channel a1: SID=578 device type=DISK
allocated channel: a2
channel a2: SID=626 device type=DISK

Starting restore at 16-JUN-20

channel a2: skipped, AUTOBACKUP already found
channel a1: restoring control file
channel a1: restore complete, elapsed time: 00:00:09
output file name=+PRAS_DATA/RMANCTLP/CONTROLFILE/current.258.1043260593
output file name=+PRAS_FRA/RMANCTLP/CONTROLFILE/current.257.1043260593
Finished restore at 16-JUN-20

database mounted
RMAN-05529: warning: DB_FILE_NAME_CONVERT resulted in invalid ASM names; names changed to disk group only.

contents of Memory Script:
{
   set until scn  53153037;
   sql clone 'alter database flashback off';
   set newname for datafile  1 to 
 "+PRAS_DATA";
   set newname for datafile  2 to 
 "+PRAS_DATA";
   set newname for datafile  3 to 
 "+PRAS_DATA";
   set newname for datafile  4 to 
 "+PRAS_DATA";
   set newname for datafile  5 to 
 "+PRAS_DATA";
   restore
   clone database
   ;
}
executing Memory Script

executing command: SET until clause

sql statement: alter database flashback off

executing command: SET NEWNAME

executing command: SET NEWNAME

executing command: SET NEWNAME

executing command: SET NEWNAME

executing command: SET NEWNAME

Starting restore at 16-JUN-20

channel a1: starting datafile backup set restore
channel a1: specifying datafile(s) to restore from backup set
channel a1: restoring datafile 00001 to +PRAS_DATA
channel a1: restoring datafile 00005 to +PRAS_DATA
channel a1: reading from backup piece /u02/software/RMANCTLP/RMANCTLP_1043258498_1_9230_1_0ev2tn42.dbf
channel a2: starting datafile backup set restore
channel a2: specifying datafile(s) to restore from backup set
channel a2: restoring datafile 00002 to +PRAS_DATA
channel a2: reading from backup piece /u02/software/RMANCTLP/RMANCTLP_1043258498_1_9228_1_0cv2tn42.dbf
channel a1: piece handle=/u02/software/RMANCTLP/RMANCTLP_1043258498_1_9230_1_0ev2tn42.dbf tag=TAG20200616T180137
channel a1: restored backup piece 1
channel a1: restore complete, elapsed time: 00:01:15
channel a1: starting datafile backup set restore
channel a1: specifying datafile(s) to restore from backup set
channel a1: restoring datafile 00003 to +PRAS_DATA
channel a1: restoring datafile 00004 to +PRAS_DATA
channel a1: reading from backup piece /u02/software/RMANCTLP/RMANCTLP_1043258498_1_9229_1_0dv2tn42.dbf
channel a1: piece handle=/u02/software/RMANCTLP/RMANCTLP_1043258498_1_9229_1_0dv2tn42.dbf tag=TAG20200616T180137
channel a1: restored backup piece 1
channel a1: restore complete, elapsed time: 00:00:45
channel a2: piece handle=/u02/software/RMANCTLP/RMANCTLP_1043258498_1_9228_1_0cv2tn42.dbf tag=TAG20200616T180137
channel a2: restored backup piece 1
channel a2: restore complete, elapsed time: 00:03:50
Finished restore at 16-JUN-20

contents of Memory Script:
{
   switch clone datafile all;
}
executing Memory Script

datafile 1 switched to datafile copy
input datafile copy RECID=6 STAMP=1043260885 file name=+PRAS_DATA/RMANCTLP/DATAFILE/system.261.1043260655
datafile 2 switched to datafile copy
input datafile copy RECID=7 STAMP=1043260885 file name=+PRAS_DATA/RMANCTLP/DATAFILE/sysaux.260.1043260655
datafile 3 switched to datafile copy
input datafile copy RECID=8 STAMP=1043260885 file name=+PRAS_DATA/RMANCTLP/DATAFILE/undotbs.263.1043260731
datafile 4 switched to datafile copy
input datafile copy RECID=9 STAMP=1043260885 file name=+PRAS_DATA/RMANCTLP/DATAFILE/users.262.1043260729
datafile 5 switched to datafile copy
input datafile copy RECID=10 STAMP=1043260885 file name=+PRAS_DATA/RMANCTLP/DATAFILE/rman_ctlg.259.1043260655

contents of Memory Script:
{
   set until scn  53153037;
   recover
   clone database
    delete archivelog
   ;
}
executing Memory Script

executing command: SET until clause

Starting recover at 16-JUN-20

starting media recovery

channel a1: starting archived log restore to default destination
channel a1: restoring archived log
archived log thread=1 sequence=1499
channel a1: restoring archived log
archived log thread=1 sequence=1500
channel a1: reading from backup piece /u02/software/RMANCTLP/RMANCTLP_1043258659_1_9236_1_0kv2tn93.arc
channel a1: piece handle=/u02/software/RMANCTLP/RMANCTLP_1043258659_1_9236_1_0kv2tn93.arc tag=TAG20200616T180418
channel a1: restored backup piece 1
channel a1: restore complete, elapsed time: 00:00:25
archived log file name=+PRAS_FRA/RMANCTLP/ARCHIVELOG/2020_06_16/thread_1_seq_1499.259.1043260887 thread=1 sequence=1499
channel clone_default: deleting archived log(s)
archived log file name=+PRAS_FRA/RMANCTLP/ARCHIVELOG/2020_06_16/thread_1_seq_1499.259.1043260887 RECID=2 STAMP=1043260904
archived log file name=+PRAS_FRA/RMANCTLP/ARCHIVELOG/2020_06_16/thread_1_seq_1500.258.1043260887 thread=1 sequence=1500
channel clone_default: deleting archived log(s)
archived log file name=+PRAS_FRA/RMANCTLP/ARCHIVELOG/2020_06_16/thread_1_seq_1500.258.1043260887 RECID=1 STAMP=1043260886
media recovery complete, elapsed time: 00:00:01
Finished recover at 16-JUN-20
released channel: a1
released channel: a2
Oracle instance started

Total System Global Area    5368708176 bytes

Fixed Size                     8907856 bytes
Variable Size               2919235584 bytes
Database Buffers            2415919104 bytes
Redo Buffers                  24645632 bytes

contents of Memory Script:
{
   sql clone "alter system set  db_name = 
 ''RMANCTLP'' comment=
 ''Reset to original value by RMAN'' scope=spfile";
   sql clone "alter system reset  db_unique_name scope=spfile";
}
executing Memory Script

sql statement: alter system set  db_name =  ''RMANCTLP'' comment= ''Reset to original value by RMAN'' scope=spfile

sql statement: alter system reset  db_unique_name scope=spfile
Oracle instance started

Total System Global Area    5368708176 bytes

Fixed Size                     8907856 bytes
Variable Size               2919235584 bytes
Database Buffers            2415919104 bytes
Redo Buffers                  24645632 bytes
sql statement: CREATE CONTROLFILE REUSE SET DATABASE "RMANCTLP" RESETLOGS ARCHIVELOG 
  MAXLOGFILES     16
  MAXLOGMEMBERS      2
  MAXDATAFILES       30
  MAXINSTANCES     1
  MAXLOGHISTORY      292
 LOGFILE
  GROUP     1 ( '+PRAS_FRA', '+PRAS_FRA' ) SIZE 270 M  REUSE,
  GROUP     2 ( '+PRAS_FRA', '+PRAS_FRA' ) SIZE 270 M  REUSE,
  GROUP     3 ( '+PRAS_FRA', '+PRAS_FRA' ) SIZE 270 M  REUSE
 DATAFILE
  '+PRAS_DATA/RMANCTLP/DATAFILE/system.261.1043260655'
 CHARACTER SET AL32UTF8


contents of Memory Script:
{
   set newname for tempfile  1 to 
 "+PRAS_DATA";
   switch clone tempfile all;
   catalog clone datafilecopy  "+PRAS_DATA/RMANCTLP/DATAFILE/sysaux.260.1043260655", 
 "+PRAS_DATA/RMANCTLP/DATAFILE/undotbs.263.1043260731", 
 "+PRAS_DATA/RMANCTLP/DATAFILE/users.262.1043260729", 
 "+PRAS_DATA/RMANCTLP/DATAFILE/rman_ctlg.259.1043260655";
   switch clone datafile all;
}
executing Memory Script

executing command: SET NEWNAME

renamed tempfile 1 to +PRAS_DATA in control file

cataloged datafile copy
datafile copy file name=+PRAS_DATA/RMANCTLP/DATAFILE/sysaux.260.1043260655 RECID=1 STAMP=1043260943
cataloged datafile copy
datafile copy file name=+PRAS_DATA/RMANCTLP/DATAFILE/undotbs.263.1043260731 RECID=2 STAMP=1043260943
cataloged datafile copy
datafile copy file name=+PRAS_DATA/RMANCTLP/DATAFILE/users.262.1043260729 RECID=3 STAMP=1043260943
cataloged datafile copy
datafile copy file name=+PRAS_DATA/RMANCTLP/DATAFILE/rman_ctlg.259.1043260655 RECID=4 STAMP=1043260943

datafile 2 switched to datafile copy
input datafile copy RECID=1 STAMP=1043260943 file name=+PRAS_DATA/RMANCTLP/DATAFILE/sysaux.260.1043260655
datafile 3 switched to datafile copy
input datafile copy RECID=2 STAMP=1043260943 file name=+PRAS_DATA/RMANCTLP/DATAFILE/undotbs.263.1043260731
datafile 4 switched to datafile copy
input datafile copy RECID=3 STAMP=1043260943 file name=+PRAS_DATA/RMANCTLP/DATAFILE/users.262.1043260729
datafile 5 switched to datafile copy
input datafile copy RECID=4 STAMP=1043260943 file name=+PRAS_DATA/RMANCTLP/DATAFILE/rman_ctlg.259.1043260655
Leaving database unopened, as requested
Cannot remove created server parameter file
Finished Duplicate Db at 16-JUN-20

RMAN> 

Recovery Manager complete.
